# バイタルデータ特有の注意点

この章では、JINS MEMEやフィットネストラッカーのような*医療機器ではないウェルネスデバイスが生成するバイタルデータ*を分析する際の基礎的な知識について解説します。

## 各センサーの特徴

JINS MEMEのデータの活用を検討している場合、他のデバイスでは取得が難しい指標を取り得るということがあるかと思いますが、他のデータと比べるとそれぞれ下表の特徴があります。

| 指標 | 取得デバイス | シグナル強度 | シグナル特徴 | 変動周期 | 反映している生体現象 | 静止時取得率 | 運動時取得率 |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 心拍数(HR) | LED+光量センサー | 弱 | 周期的 | 5-10秒 |  運動強度、緊張など | 95% | 70% |
| 心拍変動(HRV,PPI,LF/HF) | LED+光量センサー | 弱 | 状態 | 5-10秒 | 緊張、ストレスなど | 80% | 0% | 
| 心拍変動(HRV,RRI,LF/HF) | アンプ+電位センサー | 中 | 状態 | 5-10秒 | 緊張、ストレスなど | 99% | 85% |
| 心電図 | アンプ+電位センサー | 中 | 状態 | 0.01-1秒(1拍内) | 心臓の疾患判断 | 99% | 0-10% |
| 歩数 | 加速度センサー | 強 | 状態 | 0.3-0.5秒 | 歩数、消費カロリー | 99% | 99% |
| 活動強度 | 加速度センサー | 強 | 状態 | 1-2秒 | 活性度、消費カロリー | 99% | 99% |
| **眼電位** | **アンプ+電位センサー** | 弱 | 状態 | 1-2秒 | 没入、覚醒など | 90-95% | 0-10% |
| 脳波 | アンプ+電位センサー | 激弱 | 状態 | 1-2秒 | 相対的な脳活動評価 | 70% | 0% |

※静止時と運動時の取得率に関しては参考値です

馴染みのあるセンサーは心拍数センサーと歩数センサーですが、これらは静止時・運動時でも精度がほとんど落ちないという特徴があり、それは以下の特徴のどちらかによるものです。

- シグナル自体が強いので、多少のノイズがあってもデータがブレない（歩数）
- シグナル自体は弱いがシグナルが周期的なため、フーリエ変換などのアプローチによってデータロスをリカバリーできる（心拍数）

例えばLED式の心拍変動測定は心拍数と同じ仕組みを利用するものの、ちょっとしたノイズでピークを逃すため、安定した測定が難しいです。LF/HFといった指標に変換するにはさらに数分間の欠落のないRRI(PPI)データを利用してAR解析が必要なためさらに難易度が高くなります。

メンタルの状態をモニタリングするには一般的に脳波が使用されますが、測定を開始するまでの調整に時間がかかるのと、シグナルが非常に弱く装着位置によっては筋電や眼電位に打ち消されるので使い勝手の良いセンサーではありません。

眼電位センサーは静止時においてメンタルの活動の手がかりを得るために使いやすいセンサーであると言えます。ただし静止時でもメガネの掛け直し、咀嚼などでデータの取れない区間があるため、ある程度のデータの欠落を想定して分析に臨む必要があります。

## JINS MEME 各指標とrobustness

眼電位センサーで取得している中間指標とそのRobustnessは下表のようになります。

| 指標名               | 反映している主な生体現象      | Robustness(1: weak...5:strong) |
|-------------------|-----------------------|------------|
| まばたき強度の平均値      | 緊張、覚醒                  | 3     |
| まばたき強度の標準偏差    | 安定性 | 3     |
| まばたき速さの平均値       | 覚醒                  | 3     |
| まばたき速さの標準偏差     | ーー                    | 3     |
| まばたき回数・間隔の平均値 | 没入                  | 2        |
| 視線移動回数（縦方向） | 活性度                | 1      |
| 視線移動回数（横方向） | 活性度、発散           | 4     |

※まばたき間隔に関して、現在は単純平均が使用されていますが、将来的に加重平均に切り替わる可能性があります。

まばたき回数・間隔のデータは、ノイズなどでデータの欠落が発生した場合大きく影響を受けます。JINS MEMEのデータではクリーンな間隔のみ残すような処理は入っていますが、他のデータに比べてRobustnessは落ちます。また、まばたき判定と視線移動（縦方向）判定は、(1)メガネの装着状態によって眉間の電極が浮き判定できなくなる、(2)縦方向シグナルをClassificationしているため、まばたき・視線移動（縦方向）間の偽陰性・擬陽性判定により精度が落ちる、ことがあります。

6軸モーションセンサーで取得している指標とそのRobustnessは下表のようになります。

| 指標名             | Robustness(1: weak...5:strong) |
|-------------------|----------|
| 歩行振動      | 4     |
| 頭部運動（非歩行時）      | 4     |
| 最大着地強度      | 4     |
| 左右足判定      | 2     |
| 姿勢角の平均値      | 5     |
| 姿勢角の標準偏差      | 5     |

6軸モーションセンサーのデータは基本的にはフルタイム使用することができ、最低限の装着を確認するフィルタを通してそのまま使うことが可能です。

## 新規分析フレームワークの構築難易度

現在提供されている指標以外に新たにフレームワークを作成する、例えば生体センサーのデータ群を利用したClassification(感情を喜怒哀楽に4分類する、など)を実現するようなことは一般的にデータのチャネル数・解像度・精度不足から難易度が高いため、シーンによって条件を絞って1次元評価（楽しい度合いが**強いか弱いか**を評価する）に落としたほうが結果が出やすいことが多いです。

以下は完全に筆者の主観になりますが、各分析フレームワークの想定構築難易度の一覧です。

| フレームワーク | 構築難易度(1困難...5容易) |
|----|----|
|動作のClassification | 2 |
|フィジカル活動強度の指標化|4 |
|感情などメンタル活動のClassification| 1 |
|没入などメンタル活動強度の指標化|3 |
